var person = [
    {
        name:  'Design-seeds',
        motto:  '为所有人设计种子|♥颜色|灵感调色板',
        href:  'https://www.design-seeds.com/',
        src: 'https://image.thum.io/get/https://www.design-seeds.com/',
        sorts:  'color'
    },
    {
        name:  'Color Space',
        motto:  'Color Space是一款非常实用的渐变生成器，你只需要选择一个颜色，就可以生成20~30种不同风格的配色方案，效率不要太高！',
        href:  'https://mycolor.space/',
        src: 'https://image.thum.io/get/https://mycolor.space/',
        sorts:  'color'
    },
    {
        name:  'Grabient',
        motto:  '可以编辑的渐变网站',
        href:  'https://www.grabient.com/',
        src: 'https://image.thum.io/get/https://www.grabient.com/',
        sorts:  'color'
    },
    {
        name:  'COLORLESS',
        motto:  '快速找到适合界面的颜色',
        href:  'https://colorless.app/',
        src: 'https://image.thum.io/get/https://colorless.app/',
        sorts:  'color'
    },
    {
        name:  'AdobeColor',
        motto:  'Adobe专业配色工具',
        href:  'https://color.adobe.com/',
        src: 'https://image.thum.io/get/https://color.adobe.com/',
        sorts:  'color'
    },
    {
        name:  'Coolors',
        motto:  '在线快速配色生成工具',
        href:  'https://coolors.co/',
        src: 'https://image.thum.io/get/https://coolors.co/',
        sorts:  'color'
    },
    {
        name:  'Colorhunt',
        motto:  '每天更新一组简洁舒服的配色方案',
        href:  'http://www.colorhunt.co/',
        src: 'https://image.thum.io/get/http://www.colorhunt.co/',
        sorts:  'color'
    },
    {
        name:  'webgradients',
        motto:  'itmeo旗下180个漂亮渐变色模板',
        href:  'https://webgradients.com/',
        src: 'https://image.thum.io/get/https://webgradients.com/',
        sorts:  'color'
    },
    {
        name:  'Trianglify',
        motto:  '炫酷多边形背景色块生成',
        href:  'http://qrohlf.com/trianglify-generator/',
        src: 'https://image.thum.io/get/http://qrohlf.com/trianglify-generator/',
        sorts:  'color'
    },
    {
        name:  'WebColourData',
        motto:  '通过网址获取分析网站配色',
        href:  'http://webcolourdata.com/',
        src: 'https://image.thum.io/get/http://webcolourdata.com/',
        sorts:  'color'
    },
    {
        name:  '中国传统色',
        motto:  '中科院色谱的中国传统色',
        href:  'http://zhongguose.com/',
        src: 'https://image.thum.io/get/http://zhongguose.com/',
        sorts:  'color'
    },
    {
        name:  'Mesh Gradients',
        motto:  '流行的网格渐变背景免费下载',
        href:  'https://lstore.graphics/meshgradients/',
        src: 'https://image.thum.io/get/https://lstore.graphics/meshgradients/',
        sorts:  'color'
    },
    {
        name:  'Picular',
        motto:  '色彩搜索引擎',
        href:  'https://picular.co/',
        src: 'https://image.thum.io/get/https://picular.co/',
        sorts:  'color'
    },
    {
        name:  'coolors APP',
        motto:  '在线配色以及查看优秀的配色方案',
        href:  'https://coolors.co/browser',
        src: 'https://image.thum.io/get/https://coolors.co/browser',
        sorts:  'color'
    },
    {
        name:  'colourco.de',
        motto:  '简单易用的在线配色工具',
        href:  'http://colourco.de',
        src: 'https://image.thum.io/get/http://colourco.de',
        sorts:  'color'
    },
    {
        name:  'Colllor',
        motto:  '轻松创建色调一致的配色板',
        href:  'http://colllor.com',
        src: 'https://image.thum.io/get/http://colllor.com',
        sorts:  'color'
    },
    {
        name:  'Colormind',
        motto:  '智能生成中性色调颜色 (推荐)',
        href:  'http://colormind.io/',
        src: 'https://image.thum.io/get/http://colormind.io/',
        sorts:  'color'
    },
    {
        name:  'UIgradients',
        motto:  '生成美丽的渐变颜色（推荐）',
        href:  'http://uigradients.com',
        src: 'https://image.thum.io/get/http://uigradients.com',
        sorts:  'color'
    },
    {
        name:  'colors.css',
        motto:  '一个包含16种全新标准色CSS样式表',
        href:  'http://clrs.cc',
        src: 'https://image.thum.io/get/http://clrs.cc',
        sorts:  'color'
    },
    {
        name:  'PALETTABLE',
        motto:  '推荐！智能匹配的颜色赞哦！',
        href:  'http://www.palettable.io',
        src: 'https://image.thum.io/get/http://www.palettable.io',
        sorts:  'color'
    },
    {
        name:  'Material风格配色',
        motto:  '轻易搭配出Google Magerial Design的配色方案',
        href:  'http://www.materialpalette.com',
        src: 'https://image.thum.io/get/http://www.materialpalette.com',
        sorts:  'color'
    },
    {
        name:  'Material UI',
        motto:  '把所有颜色汇聚在一个页面上',
        href:  'https://www.materialui.co/colors',
        src: 'https://image.thum.io/get/https://www.materialui.co/colors',
        sorts:  'color'
    },
    {
        name:  'material mixer',
        motto:  '快速 DIY 美观的 Material design APP 界面配色',
        href:  'http://www.sankk.in/material-mixer',
        src: 'https://image.thum.io/get/http://www.sankk.in/material-mixer',
        sorts:  'color'
    },
    {
        name:  'MD Palette Generator',
        motto:  '根据自定义颜色生成配色',
        href:  'http://mcg.mbitson.com/#',
        src: 'https://image.thum.io/get/http://mcg.mbitson.com/#',
        sorts:  'color'
    },
    {
        name:  'Random material',
        motto:  '随机搭配一套UI配色方案',
        href:  'https://codecrafted.net/randommaterial',
        src: 'https://image.thum.io/get/https://codecrafted.net/randommaterial',
        sorts:  'color'
    },
    {
        name:  'Material Colors',
        motto:  '精选 500 和 A200 色板的颜色',
        href:  'http://materialcolors.com',
        src: 'https://image.thum.io/get/http://materialcolors.com',
        sorts:  'color'
    },
    {
        name:  'MD Colors',
        motto:  '又一个简单的可视化的Material Design工具',
        href:  'http://www.materialup.com/tools/colors',
        src: 'https://image.thum.io/get/http://www.materialup.com/tools/colors',
        sorts:  'color'
    },
    {
        name:  'tintui',
        motto:  '只显示 Material Design 中的 500 颜色',
        href:  'http://tintui.com',
        src: 'https://image.thum.io/get/http://tintui.com',
        sorts:  'color'
    },
    {
        name:  'Colorion',
        motto:  '分享 Material 设计配色，带收藏夹功能',
        href:  'http://material.colorion.co',
        src: 'https://image.thum.io/get/http://material.colorion.co',
        sorts:  'color'
    },
    {
        name:  '日本和色大辞典',
        motto:  '',
        href:  'http://www.colordic.org',
        src: 'https://image.thum.io/get/http://www.colordic.org',
        sorts:  'color'
    },
]
var inp = document.getElementsByClassName('inp')[0],
    btnList = document.getElementsByClassName('btn-list')[0],
    prompt = document.getElementsByClassName('prompt')[0],
    user = document.getElementsByClassName('user')[0];

function createList(list) {
    var str = '';
    list.forEach(function(ele, index) {
        str += '<a href =' + ele.href + ' target="_self">\
                    <li>\
                    <div class="head-img">\
                    <img src=' + ele.src + ' alt="">\
                    </div>\
                    <div class="tit">\
                    <p class="name">' + ele.name + '</p>\
                    <p class="motto">' + ele.motto + '</p>\
                    </div>\
                    </li>\
                </a>'
    })
    user.innerHTML = str
}
createList(person);
var state = createStore({
    text: '',
    sorts: 'all'
})
state.addFn(function() {
    createList(perArr());
    anti(show());
})
inp.oninput = anti(getInput, 1000)

function getInput() {
    state.change({
        type: 'text',
        value: this.value
    });
}

function anti(hander, delay) {
    var timer = null;
    return function() {
        var _self = this,
            args = arguments;
        clearTimeout(timer)
        timer = setTimeout(function() {
            hander.apply(_self, args)
        }, delay)
    }
}

function show() {
    if (user.children.length == 0) {
        prompt.style.display = 'block'
    } else {
        prompt.style.display = 'none'
    }
}

function addFn(obj, arr) {
    return function() {
        var lastArr = arr;
        for (prop in obj) {
            lastArr = obj[prop](state.getState()[prop], lastArr)
        }
        return lastArr
    }
}
var perArr = addFn({
    text: filterText,
    sorts: filtersorts
}, person)
btnList.onclick = function(e) {
    var tar = e.target;
    if (tar.tagName == 'OPTION') {
        document.getElementsByClassName('active')[0].className = '';
        tar.className = 'active';
        state.change({
            type: 'sorts',
            value: tar.getAttribute('sorts')
        })
    }
}

function filterText(text, arr) {
    return arr.filter(function(ele, index) {
        if (ele.name.indexOf(text) != -1 || ele.motto.indexOf(text) != -1) {
            return true
        }
    })
}

function filtersorts(sorts, arr) {
    if (sorts == 'all') {
        return arr
    } else {
        return arr.filter(function(ele, index) {
            if (ele.sorts == sorts) {
                return true
            }
        })
    }
}